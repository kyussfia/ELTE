Egyéb objektumok (szinonima, nézet, szekvencia, adatbázis-kapcsoló)
----------------
(DBA_SYNONYMS, DBA_VIEWS, DBA_SEQUENCES, DBA_DB_LINKS)

------------------------------------------------------------------------------
Adjuk ki az alábbi utasítást (ARAMIS adatbázisban)
  SELECT * FROM sz1;
majd derítsük ki, hogy kinek melyik tábláját kérdeztük le. 
(Ha esetleg nézettel találkozunk, azt is fejtsük ki, hogy az mit kérdez le.)

SELECT * from dba_objects where lower(object_name) like 'sz1%';
SELECT * FROM DBA_SYNONYMS WHERE owner='PUBLIC' AND synonym_name like'SZ1%';
SELECT * from dba_objects where lower(object_name) like 'v1%' and owner='NIKOVITS';
SELECT view_name, text FROM DBA_VIEWS WHERE owner='NIKOVITS' AND view_name='V1';
SELECT * from dba_objects where lower(object_name) like 'employ%' and owner='HR';
------------------------------------------------------------------------------
Hozzunk létre egy szekvenciát, amelyik az osztály azonosítókat fogja generálni
a számunkra. Minden osztály azonosító a 10-nek többszöröse legyen.
Vigyünk fel 3 új osztályt és osztályonként minimum 3 dolgozót a táblákba. 
Az osztály azonosítókat a szekvencia segítségével állítsuk elõ, és ezt tegyük
be a táblába. (Vagyis ne kézzel írjuk be a 10, 20, 30 ... stb. azonosítót.)
A felvitel után módosítsuk a 10-es osztály azonosítóját a következõ érvényes (generált)
osztály azonosítóra. (Itt is a szekvencia segítségével adjuk meg, hogy mi lesz a 
következõ azonosító.) A 10-es osztály dolgozóinak az osztályazonosító ertékét is 
módosítsuk az új értékre.
-------------------------------------------------------------------------------
Hozzunk létre adatbázis-kapcsolót (database link) az ULLMAN adatbázisban,
amelyik a másik adatbázisra mutat. 
CREATE DATABASE LINK aramis CONNECT TO felhasznalo IDENTIFIED BY jelszo
USING 'aramis';
Ennek segítségével adjuk meg a következõ lekérdezéseket. 
A lekérdezések alapjául szolgáló táblák:

NIKOVITS.VILAG_ORSZAGAI   ULLMAN adatbázis
NIKOVITS.FOLYOK           ARAMIS adatbázis

Az országok egyedi azonosítója a TLD (Top Level Domain) oszlop.
Az ország hivatalos nyelveit vesszõkkel elválasztva a NYELV oszlop tartalmazza.
A GDP (Gross Domestic Product -> hazai bruttó össztermék) dollárban van megadva.
A folyók egyedi azonosítója a NEV oszlop.
A folyók vízhozama m3/s-ban van megadva, a vízgyûjtõ területük km2-ben.
A folyó által érintett országok azonosítóit (TLD) a forrástól a torkolatig 
(megfelelõ sorrendben vesszõkkel elválasztva) az ORSZAGOK oszlop tartalmazza.
A FORRAS_ORSZAG és TORKOLAT_ORSZAG hasonló módon a megfelelõ országok azonosítóit
tartalmazza. (Vigyázat!!! egy folyó torkolata országhatárra is eshet, pl. Duna)


- Adjuk meg azoknak az országoknak a nevét, amelyeket a Mekong nevû folyó érint.

SELECT f.nev, o.nev, o.tld, f.orszagok 
FROM NIKOVITS.orszagok@aramis o, NIKOVITS.folyok f
WHERE f.nev = 'Mekong' AND f.orszagok LIKE '%'||o.tld||'%';

-* Adjuk meg azoknak az országoknak a nevét, amelyeket a Mekong nevû folyó érint.
   Most az országok nevét a megfelelõ sorrendben (folyásirányban) adjuk meg.
---------------------------------------------------------------------------------

Adattárolással kapcsolatos fogalmak
-----------------------------------
(DBA_TABLES, DBA_DATA_FILES, DBA_TEMP_FILES, DBA_TABLESPACES, DBA_SEGMENTS, DBA_EXTENTS, DBA_FREE_SPACE)

Adjuk meg az adatbázishoz tartozó adatfile-ok (és temporális fájlok) nevét és méretét
méret szerint csökkenõ sorrendben.
--------------------------------------------------------------------
SELECT file_name, bytes FROM dba_data_files
 union
SELECT file_name, bytes FROM dba_temp_files
ORDER BY bytes DESC;

Adjuk meg, hogy milyen tablaterek vannak letrehozva az adatbazisban,
az egyes tablaterek hany adatfajlbol allnak, es mekkora az osszmeretuk.
(tablater_nev, fajlok_szama, osszmeret)
!!! Vigyázat, van temporális táblatér is.

Mekkora az adatblokkok merete a USERS táblatéren?

Van-e olyan táblatér, amelynek nincs DBA_DATA_FILES-beli adatfájlja?
Ennek adatai hol tárolódnak? -> DBA_TEMP_FILES
--------------------------------------------------------------------
SELECT tablespace_name FROM dba_tablespaces WHERE tablespace_name NOT IN
 (SELECT tablespace_name FROM dba_data_files);
SELECT file_name, tablespace_name FROM dba_temp_files;

Melyik a legnagyobb méretû tábla szegmens az adatbázisban (a tulajdonost is adjuk meg) 
és hány extensbõl áll? (A particionált táblákat most ne vegyük figyelembe.)

Melyik a legnagyobb meretû index szegmens az adatbázisban és hány blokkból áll?
(A particionalt indexeket most ne vegyuk figyelembe.)

Adjuk meg adatfájlonkent, hogy az egyes adatfájlokban mennyi a foglalt 
hely osszesen (írassuk ki a fájlok méretét is).

Melyik ket felhasznalo objektumai foglalnak osszesen a legtobb helyet az adatbazisban?
Vagyis ki foglal a legtöbb helyet, és ki a második legtöbbet?
--------------------------------------------------------------------
SELECT * FROM 
 (select owner, sum(bytes) from dba_segments 
  group by owner order by 2 desc)
WHERE rownum <= 2;

Hány extens van a 'users01.dbf' adatfájlban? Mekkora ezek összmérete?
--------------------------------------------------------------------
SELECT count(*), sum(e.bytes) FROM dba_data_files f, dba_extents e
WHERE file_name like '%/users01%' AND f.file_id=e.file_id;

Hány összefüggõ szabad terület van a 'users01.dbf' adatfájlban? Mekkora ezek összmérete?
--------------------------------------------------------------------
SELECT count(*), sum(fr.bytes) FROM dba_data_files f, dba_free_space fr
WHERE file_name LIKE '%/users01%' AND f.file_id=fr.file_id;

Hány százalékban foglalt a 'users01.dbf' adatfájl?
--------------------------------------------------------------------
SELECT sum(e.bytes)/f.bytes FROM dba_data_files f, dba_extents e
WHERE file_name LIKE '%/users01%' AND f.file_id=e.file_id
GROUP BY f.bytes;

Van-e a NIKOVITS felhasználónak olyan táblája, amelyik több adatfájlban is foglal helyet? (Aramis)
--------------------------------------------------------------------
SELECT segment_name, count(distinct file_id)
FROM dba_extents WHERE owner='NIKOVITS' AND segment_type='TABLE'
GROUP BY segment_name HAVING count(distinct file_id) > 1;

Válasszunk ki a fenti táblákból egyet (pl. tabla_123) és adjuk meg, hogy ez a 
tábla mely adatfájlokban foglal helyet.

Melyik táblatéren van az ORAUSER felhasználó dolgozo táblája?

Melyik táblatéren van a NIKOVITS felhasználó ELADASOK táblája? (Miért lesz null?)



